/*! jQuery NavToSelect - v0.2.1 - 2013-08-29
* https://github.com/amazingSurge/jquery-navToSelect
* Copyright (c) 2013 amazingSurge; Licensed GPL */
!function(a,b,c,d){"use strict";var e=function(a,b){this.element=a,this.$element=c(a),this._isBuilded=!1,this.options=c.extend(e.defaults,b);var d=this;c.extend(d,{init:function(){var a=d.getItems();d.build(a),d.$select.on("change",d.options.changeEvent)},build:function(a){d.$select=c("<select />",{"class":d.options.className}).html(d.generateOptionsString(a,1)),null===d.options.prependTo?d.$element.after(d.$select):d.$select.prependTo(d.options.prependTo),d._isBuilded=!0},generateOptionString:function(a,b){var c=new Array(b).join(d.options.indentString);return 1!==b&&d.options.indentSpace&&(c+="&nbsp;"),'<option value="'+a.value+'"'+(a.linkable===!1?' data-linkable="false"':"")+(a.actived===!0?' selected="selected"':"")+">"+c+a.label+"</option>"},generateOptionsString:function(a,b){if(b>d.options.maxLevel)return"";var e="";return c.each(a,function(a,c){c.linkable===!1&&"undefined"!=typeof c.items&&1===b&&d.options.useOptgroup&&(e+='<optgroup label="'+c.label+'">',e+=d.generateOptionsString(c.items,b+1),e+="</optgroup>"),"undefined"!=typeof c.items?(e+=d.generateOptionString(c,b),e+=d.generateOptionsString(c.items,b+1)):e+=d.generateOptionString(c,b)}),e},getItems:function(){function a(b,e){var f=[];return b.children("li").each(function(){var b=c(this),g={value:d.getItemValue(b),label:d.options.getItemLabel.call(d,b),linkable:d.isLinkable(b),actived:d.isActived(b)};b.children("ul, ol").length&&(g.items=[],b.children("ul, ol").each(function(){g.items=g.items.concat(a(c(this),e+1))})),f.push(g)}),f}var b=[];return d.options.defaultText&&(b=b.concat({value:"#",label:d.options.defaultText,linkable:!1})),b=b.concat(a(d.$element,1))},getItemValue:function(a){return a.find(d.options.linkSelector).attr("href")},isLinkable:function(a){return"#"!==d.getItemValue(a)},isActived:function(a){return a.is("."+d.options.activeClass)},getItemLabel:function(a){return a.find(d.options.linkSelector).text()},isBuilded:function(){return d._isBuilded}}),this.init()};e.defaults={maxLevel:4,prependTo:null,activeClass:"active",linkSelector:"a:first",className:"nav2select",indentString:"&ndash;",indentSpace:!0,defaultText:"Navigate to...",useOptgroup:!1,namespace:"navToSelect",getItemLabel:function(a){return a.find(this.options.linkSelector).text()},changeEvent:function(){c(this).data("linkable")!==!1&&e.goTo(this.value)}},e.prototype={constructor:e,destroy:function(){this.$element.data("NavToSelect",null)}},e.goTo=function(a){b.location.href=a},c.fn.navToSelect=function(a){if("string"==typeof a){var b=a,f=arguments.length>1?Array.prototype.slice.call(arguments,1):d;return this.each(function(){var a=c.data(this,"navToSelect");a&&"function"==typeof a[b]&&a[b].apply(a,f)})}return this.each(function(){var b=c.data(this,"navToSelect");b||(b=new e(this,a),c.data(this,"navToSelect",b))})}}(window,document,jQuery);